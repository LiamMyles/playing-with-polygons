(this["webpackJsonpplaying-with-polygons"]=this["webpackJsonpplaying-with-polygons"]||[]).push([[0],{23:function(t,e,n){t.exports=n(32)},31:function(t,e,n){},32:function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),i=n(18),a=n.n(i),s=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function c(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}var l=n(7),u=n(9),d=n(4),g=n(10),p=Object(g.a)((function(t,e){switch(e.type){case"NEXT_SCREEN":var n=t.currentScreen+1;n<=t.totalScreens?t.currentScreen=n:t.currentScreen=1;break;case"PREV_SCREEN":var o=t.currentScreen-1;t.currentScreen=o<=0?t.totalScreens:o}})),h={currentScreen:1,totalScreens:3},f=function(t){var e=t.children,n=Object(o.useReducer)(p,h),i=Object(d.a)(n,2),a=i[0],s=i[1];return r.a.createElement(v.Provider,{value:s},r.a.createElement(y.Provider,{value:a},e))},v=Object(o.createContext)({}),y=Object(o.createContext)({}),O=n(15);function b(){var t=Object(l.a)(["\n  grid-row: 1;\n  grid-column: 1;\n"]);return b=function(){return t},t}var m=Object(u.a)(O.a.div)(b()),k=function(t){var e=t.children,n=t.currentScreen,o=Object(O.b)(n,(function(t){return t}),{from:{opacity:0,transform:"translate(100%,0)"},enter:{opacity:1,transform:"translate(0%,0)"},leave:{opacity:0,transform:"translate(-50%,0)"}});return r.a.createElement(r.a.Fragment,null,o.map((function(t){var n=t.item,o=t.key,i=t.props;return r.a.createElement(m,{key:o,style:i},r.a.Children.map(e,(function(t,e){if(e===n-1)return t})))})))},S=n(2),E=n(13);function P(t,e){var n=Object(E.a)({},Object(g.b)(t));return Object.keys(e).forEach((function(t){n[t]=e[t]})),n}function w(t,e){return Math.random()*(e-t)+t}function C(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function N(){return 1===C(0,1)}function x(){var t=function(t,e,n){var o,r,i;if(0===e)o=r=i=n;else{var a=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},s=n<.5?n*(1+e):n+e-n*e,c=2*n-s;o=a(c,s,t+1/3),r=a(c,s,t),i=a(c,s,t-1/3)}return[Math.round(255*o),Math.round(255*r),Math.round(255*i)]}(w(0,1),w(.5,.7),w(.5,.7)),e=Object(d.a)(t,3),n=e[0],o=e[1],r=e[2];return"rgb(".concat(n,",").concat(o,",").concat(r,")")}function R(t){var e=C(1,t);return Object(S.a)(Array(e)).map((function(){return x()}))}function _(){var t=C(3,12);return{enabled:N(),strokeWidth:C(0,10),amount:t,colours:R(t)}}function A(t){return{enabled:N(),fillColours:R(t),size:C(1,10),strokeWidth:C(0,10),strokeColours:R(t)}}function j(){return{enabled:N(),clockwise:N(),speed:C(1,5),startingRotation:C(1,360)}}function I(){var t=function(t,e){var n=C(t,e-1);return{min:n,max:C(n+1,e)}}(1,300),e=t.min,n=t.max;return{enabled:N(),range:{min:e,max:n},speed:C(1,5),startingSize:C(e,n)}}function T(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.active,n=void 0===e||e,o=t.position,r=void 0===o?{x:0,y:0}:o,i=_(),a=A(i.amount),s=j(),c=I();return{active:n,position:r,sides:i,dots:a,rotation:s,scale:c}}var L=Object(g.a)((function(t,e){switch(e.type){case"CREATE_POLYGON_GROUP":t.push({active:!0,position:{x:0,y:0},rings:[]});break;case"CREATE_POLYGON":t[e.group].rings.push({active:!0,position:{x:0,y:0},dots:{enabled:!0,fillColours:["black"],size:1,strokeColours:["black"],strokeWidth:1},rotation:{clockwise:!0,enabled:!0,speed:1,startingRotation:1},scale:{enabled:!0,speed:1,range:{max:10,min:0},startingSize:5},sides:{enabled:!0,strokeWidth:1,colours:["black"],amount:6}});break;case"UPDATE_POLYGON_GROUP_POSITION":t[e.group].position=e.position;break;case"UPDATE_POLYGON_GROUP_ACTIVE":t[e.group].active=e.active;break;case"UPDATE_POLYGON_ALL":var n=t[e.group].rings[e.polygon];void 0!==e.polygonState.active&&(n.active=e.polygonState.active),void 0!==e.polygonState.position&&(n.position=e.polygonState.position),void 0!==e.polygonState.dots&&(n.dots=P(n.dots,e.polygonState.dots)),void 0!==e.polygonState.rotation&&(n.rotation=P(n.rotation,e.polygonState.rotation)),void 0!==e.polygonState.sides&&(n.sides=P(n.sides,e.polygonState.sides)),void 0!==e.polygonState.scale&&(n.scale=P(n.scale,e.polygonState.scale));break;case"UPDATE_POLYGON_POSITION":t[e.group].rings[e.polygon].position=e.position;break;case"UPDATE_POLYGON_ACTIVE":t[e.group].rings[e.polygon].active=e.active;break;case"UPDATE_POLYGON_DOTS":var o=t[e.group].rings[e.polygon];o.dots=P(o.dots,e.dots);break;case"UPDATE_POLYGON_ROTATION":var r=t[e.group].rings[e.polygon];r.rotation=P(r.rotation,e.rotation);break;case"UPDATE_POLYGON_SIDES":var i=t[e.group].rings[e.polygon];i.sides=P(i.sides,e.sides);break;case"UPDATE_POLYGON_SCALE":var a=t[e.group].rings[e.polygon];a.scale=P(a.scale,e.scale);break;case"RANDOMIZE_POLYGON_RINGS":t[e.group].rings=function(){var t=C(2,6);return Object(S.a)(Array(t)).map((function(){return T()}))}();break;case"RANDOMIZE_POLYGON":var s=t[e.group].rings;s[e.polygon]=T(Object(g.b)(s[e.polygon]));break;case"RANDOMIZE_POLYGON_SIDES":t[e.group].rings[e.polygon].sides=_();break;case"RANDOMIZE_POLYGON_ROTATION":t[e.group].rings[e.polygon].rotation=j();break;case"RANDOMIZE_POLYGON_SCALE":t[e.group].rings[e.polygon].scale=I();break;case"RANDOMIZE_POLYGON_DOTS":var c=t[e.group].rings[e.polygon],l=c.sides.amount;c.dots=A(l)}})),W=[{active:!0,position:{x:0,y:0},rings:[{active:!0,position:{x:0,y:0},dots:{enabled:!0,fillColours:["black"],size:1,strokeColours:["black"],strokeWidth:1},rotation:{clockwise:!0,enabled:!0,speed:1,startingRotation:1},scale:{enabled:!0,speed:1,range:{max:10,min:0},startingSize:5},sides:{enabled:!0,strokeWidth:1,colours:["black"],amount:6}}]}],G=function(t){var e=t.children,n=Object(o.useReducer)(L,W),i=Object(d.a)(n,2),a=i[0],s=i[1];return r.a.createElement(M.Provider,{value:s},r.a.createElement(D.Provider,{value:a},e))},M=Object(o.createContext)({}),D=Object(o.createContext)([]),Y=n(5),z=n(1),U=n(3),Z=function(){function t(e){Object(z.a)(this,t),this.style=void 0,this.animationState=void 0,this.animationConstants=void 0,this.style=this.getInitialStyles(e),this.animationConstants=this.getInitialConstants(e),this.animationState=this.getInitialState(e)}return Object(U.a)(t,[{key:"getInitialStyles",value:function(t){var e=t.sides,n=t.dots;return{sides:{colours:e.colours,strokeWidth:e.strokeWidth,enabled:e.enabled},dots:{enabled:n.enabled,size:n.size,fillColours:n.fillColours,strokeColours:n.strokeColours,strokeWidth:n.strokeWidth}}}},{key:"getInitialPoints",value:function(t,e){var n=2*Math.PI/t,o=n;return Object(S.a)(Array(t)).map((function(){o+=n;var t=Math.cos(o),r=Math.sin(o);return{x:Math.round(t*e),y:Math.round(r*e),sin:r,cos:t}}))}},{key:"getInitialConstants",value:function(t){var e=t.active,n=t.rotation,o=t.scale;return{position:t.position,isActive:e,isRotating:n.enabled,isScaling:o.enabled,isRotatingClockwise:n.clockwise,rotationSpeed:n.speed,scalingSpeed:o.speed,scalingRange:o.range}}},{key:"getInitialState",value:function(t){var e=t.scale,n=t.rotation,o=t.sides,r=this.getInitialPoints(o.amount,e.startingSize),i=e.startingSize<=(e.range.max-e.range.min)/2;return{currentRotation:n.startingRotation,currentSize:e.startingSize,currentlyExpanding:i,polygonPoints:r}}},{key:"updateRotation",value:function(){var t,e=this.animationConstants,n=e.isRotating,o=e.isRotatingClockwise,r=e.rotationSpeed,i=this.animationState.currentRotation;if(n){if((t=o?i+r:i-r)>=360)t=0+(i-360);else if(t<=-360){t=0-(i-360)}this.animationState.currentRotation=t}}},{key:"updateScale",value:function(){var t=this.animationConstants,e=t.isScaling,n=t.scalingSpeed,o=t.scalingRange,r=this.animationState,i=r.currentlyExpanding,a=r.polygonPoints,s=r.currentSize;if(e){var c,l=i;(c=i?s+n:s-n)>=o.max?(c=o.max,l=!1):c<=o.min&&(c=o.min,l=!0);var u=a.map((function(t){var e=t.cos,n=t.sin,o=Object(E.a)({},t);return o.x=Math.round(e*c),o.y=Math.round(n*c),o}));this.animationState.currentSize=c,this.animationState.currentlyExpanding=l,this.animationState.polygonPoints=u}}},{key:"getPolygonFrame",value:function(){var t=this.style,e=t.dots,n=t.sides,o=this.animationState,r=o.currentRotation,i=o.polygonPoints,a=this.animationConstants.position,s=i.map((function(t){return{x:t.x,y:t.y}})),c=i.map((function(t,e){var n,o=e+1;return n=o===i.length?{x:i[0].x,y:i[0].y}:{x:i[o].x,y:i[o].y},[{x:t.x,y:t.y},n]}));return{position:a,currentRotation:r,dots:{enabled:e.enabled,size:e.size,position:s,fillColours:e.fillColours,strokeColours:e.strokeColours,strokeWidth:e.strokeWidth},sides:{enabled:n.enabled,positions:c,strokeWidth:n.strokeWidth,strokeColours:n.colours}}}},{key:"getPolygonFrameAndStep",value:function(){var t=this.animationConstants.isActive,e=this.getPolygonFrame();return t&&(this.updateScale(),this.updateRotation()),e}}]),t}();function F(t,e,n){var o=t.currentRotation,r=t.dots,i=t.sides,a=t.position,s=Math.floor(e.width*(a.x/100)/2),c=Math.floor(e.height*(a.y/100)/2);n.push(),n.translate(s,c),n.rotate(o),i.enabled&&i.positions.forEach((function(t,e){var o=e%i.strokeColours.length;n.stroke(i.strokeColours[o]),n.strokeWeight(i.strokeWidth),n.line(t[0].x,t[0].y,t[1].x,t[1].y)})),r.enabled&&(n.push(),r.position.forEach((function(t,e){var o=e%r.fillColours.length,i=e%r.strokeColours.length,a=t.x,s=t.y;n.fill(r.fillColours[o]),n.strokeWeight(r.strokeWidth),n.stroke(r.strokeColours[i]),n.ellipse(a,s,r.size)})),n.pop()),n.pop()}var H=n(22),V=n.n(H);function B(){var t=Object(l.a)(["\n  width: 100%;\n  height: 100%;\n"]);return B=function(){return t},t}var J=u.a.div(B()),X=function(t){var e=t.sketch,n=Object(o.useRef)(null),i=Object(o.useRef)();return Object(o.useEffect)((function(){var t=n.current;void 0!==i.current&&i.current.remove();var o=new V.a(e,t);return i.current=o,function(){i.current.remove()}}),[i,n,e]),r.a.createElement(J,{ref:n})};function $(t,e){var n=t.length,o=t.map((function(t){return t.rings.length})).join("-"),r=t.map((function(t){return t.rings.map((function(t){return t.rotation.startingRotation})).join("-")})).join("-");return"".concat(n,"-").concat(o,"-").concat(r,"-").concat(e.width,"-").concat(e.height)}var q=function(){var t=Object(o.useContext)(M),e=Object(o.useContext)(D),n=Object(o.useState)({height:0,width:0}),i=Object(d.a)(n,2),a=i[0],s=i[1],c=Object(o.useRef)(null);Object(o.useEffect)((function(){(null===c||void 0===c?void 0:c.current)&&s({height:c.current.offsetHeight,width:c.current.offsetWidth})}),[c,s]),Object(o.useEffect)((function(){function t(){(null===c||void 0===c?void 0:c.current)&&s({height:c.current.offsetHeight,width:c.current.offsetWidth})}var e;t();var n=function(){clearTimeout(e),e=setTimeout((function(){return t()}),250)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[c,s]),Object(o.useEffect)((function(){t({type:"RANDOMIZE_POLYGON",group:0,polygon:0}),t({type:"RANDOMIZE_POLYGON",group:0,polygon:1}),t({type:"RANDOMIZE_POLYGON",group:0,polygon:2}),t({type:"RANDOMIZE_POLYGON",group:0,polygon:3}),t({type:"UPDATE_POLYGON_POSITION",group:0,polygon:0,position:{x:0,y:50}}),t({type:"UPDATE_POLYGON_POSITION",group:0,polygon:1,position:{x:50,y:0}}),t({type:"UPDATE_POLYGON_POSITION",group:0,polygon:2,position:{x:-50,y:0}}),t({type:"UPDATE_POLYGON_POSITION",group:0,polygon:3,position:{x:0,y:-50}})}),[t,c]);var l=function(t,e){var n=t.map((function(t){return t.rings.map((function(t){return new Z(t)}))}));return function(t){t.setup=function(){t.createCanvas(e.width,e.height),t.background("lightgrey")},t.draw=function(){t.angleMode("degrees"),t.background("lightgrey"),t.translate(e.width/2,e.height/2);var o,r=Object(Y.a)(n);try{for(r.s();!(o=r.n()).done;){var i=o.value;t.push();var a,s=Object(Y.a)(i);try{for(s.s();!(a=s.n()).done;){F(a.value.getPolygonFrameAndStep(),e,t)}}catch(c){s.e(c)}finally{s.f()}t.pop()}}catch(c){r.e(c)}finally{r.f()}}}}(e,a);return r.a.createElement("div",{ref:c,style:{background:"white",width:"100%",height:"100%",maxWidth:"100vw",textAlign:"center",fontSize:200}},r.a.createElement(X,{sketch:l,key:$(e,a)}))};function K(){var t=Object(l.a)(["\n  display: grid;\n  grid-template-rows: minmax(90%, 90vh) minmax(10vh, 10px);\n  overflow: hidden;\n"]);return K=function(){return t},t}var Q=u.a.main(K()),tt=function(){var t=Object(o.useContext)(y),e=Object(o.useContext)(v);return r.a.createElement(Q,null,r.a.createElement(k,{currentScreen:t.currentScreen},r.a.createElement(q,null),r.a.createElement("h1",{style:{background:"purple",width:"100%",height:"100%",textAlign:"center",fontSize:200}},"Hello"),r.a.createElement("h1",{style:{background:"pink",width:"100%",height:"100%",textAlign:"center",fontSize:200}},"World")),r.a.createElement("div",null,r.a.createElement("h1",null,"Hello"),r.a.createElement("button",{onClick:function(){e({type:"PREV_SCREEN"})}},"Previous"),r.a.createElement("button",{onClick:function(){e({type:"NEXT_SCREEN"})}},"Next")))};n(31);a.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null,r.a.createElement(f,null,r.a.createElement(tt,null)))),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/playing-with-polygons",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/playing-with-polygons","/service-worker.js");s?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):c(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):c(e,t)}))}}()}},[[23,1,2]]]);
//# sourceMappingURL=main.1ce84307.chunk.js.map