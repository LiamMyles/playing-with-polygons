(this["webpackJsonpplaying-with-polygons"]=this["webpackJsonpplaying-with-polygons"]||[]).push([[0],{23:function(t,e,n){t.exports=n(32)},31:function(t,e,n){},32:function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),a=n(18),i=n.n(a),s=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function c(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}var l=n(4),u=n(5),d=n(6),g=n(9),h=Object(g.a)((function(t,e){switch(e.type){case"NEXT_SCREEN":var n=t.currentScreen+1;n<=t.totalScreens?t.currentScreen=n:t.currentScreen=1;break;case"PREV_SCREEN":var o=t.currentScreen-1;t.currentScreen=o<=0?t.totalScreens:o}})),f={currentScreen:1,totalScreens:3},p=function(t){var e=t.children,n=Object(o.useReducer)(h,f),a=Object(d.a)(n,2),i=a[0],s=a[1];return r.a.createElement(v.Provider,{value:s},r.a.createElement(b.Provider,{value:i},e))},v=Object(o.createContext)({}),b=Object(o.createContext)({}),y=n(2),m=n(12);function E(t,e){var n=Object(m.a)({},Object(g.b)(t));return Object.keys(e).forEach((function(t){n[t]=e[t]})),n}function O(t,e){return Math.random()*(e-t)+t}function k(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function S(){var t=function(t,e,n){var o,r,a;if(0===e)o=r=a=n;else{var i=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},s=n<.5?n*(1+e):n+e-n*e,c=2*n-s;o=i(c,s,t+1/3),r=i(c,s,t),a=i(c,s,t-1/3)}return[Math.round(255*o),Math.round(255*r),Math.round(255*a)]}(O(0,1),O(.5,.7),O(.5,.7)),e=Object(d.a)(t,3),n=e[0],o=e[1],r=e[2];return"rgb(".concat(n,",").concat(o,",").concat(r,")")}function w(t){var e=k(1,t);return Object(y.a)(Array(e)).map((function(){return S()}))}function C(){var t=k(3,12);return{enabled:!0,strokeWidth:k(1,10),amount:t,colours:w(t)}}function P(t){return{enabled:!0,fillColours:w(t),size:k(5,10),strokeWidth:k(0,10),strokeColours:w(t)}}function R(){return{enabled:!0,clockwise:1===k(0,1),speed:k(1,5),startingRotation:k(1,360)}}function x(){var t=k(0,20),e=k(200,500);return{enabled:!0,range:{min:t,max:e},speed:k(1,5),startingSize:k(t,e)}}function j(){var t=k(0,100);return t<=48?{sidesEnabled:!0,dotsEnabled:!1,rotationEnabled:!0,scaleEnabled:!0}:t<=50?{sidesEnabled:!0,dotsEnabled:!1,rotationEnabled:!0,scaleEnabled:!1}:t<=90?{sidesEnabled:!1,dotsEnabled:!0,rotationEnabled:!0,scaleEnabled:!0}:t<=95?{sidesEnabled:!1,dotsEnabled:!0,rotationEnabled:!0,scaleEnabled:!1}:{sidesEnabled:!0,dotsEnabled:!0,rotationEnabled:!0,scaleEnabled:!0}}function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.active,n=void 0===e||e,o=t.position,r=void 0===o?{x:0,y:0}:o,a=C(),i=P(a.amount),s=R(),c=x(),l=j(),u=l.sidesEnabled,d=l.scaleEnabled,g=l.rotationEnabled,h=l.dotsEnabled;return a.enabled=u,i.enabled=h,c.enabled=d,s.enabled=g,{active:n,position:r,sides:a,dots:i,rotation:s,scale:c}}function _(){var t=k(2,8);return Object(y.a)(Array(t)).map((function(){return N()}))}var A=Object(g.a)((function(t,e){switch(e.type){case"CREATE_POLYGON_GROUP":t.push({active:!0,position:{x:0,y:0},rings:[]});break;case"CREATE_POLYGON":t[e.group].rings.push({active:!0,position:{x:0,y:0},dots:{enabled:!0,fillColours:["black"],size:1,strokeColours:["black"],strokeWidth:1},rotation:{clockwise:!0,enabled:!0,speed:1,startingRotation:1},scale:{enabled:!0,speed:1,range:{max:10,min:0},startingSize:5},sides:{enabled:!0,strokeWidth:1,colours:["black"],amount:6}});break;case"UPDATE_POLYGON_GROUP_POSITION":t[e.group].position=e.position;break;case"UPDATE_POLYGON_GROUP_ACTIVE":t[e.group].active=e.active;break;case"UPDATE_POLYGON_ALL":var n=t[e.group].rings[e.polygon];void 0!==e.polygonState.active&&(n.active=e.polygonState.active),void 0!==e.polygonState.position&&(n.position=e.polygonState.position),void 0!==e.polygonState.dots&&(n.dots=E(n.dots,e.polygonState.dots)),void 0!==e.polygonState.rotation&&(n.rotation=E(n.rotation,e.polygonState.rotation)),void 0!==e.polygonState.sides&&(n.sides=E(n.sides,e.polygonState.sides)),void 0!==e.polygonState.scale&&(n.scale=E(n.scale,e.polygonState.scale));break;case"UPDATE_POLYGON_POSITION":t[e.group].rings[e.polygon].position=e.position;break;case"UPDATE_POLYGON_ACTIVE":t[e.group].rings[e.polygon].active=e.active;break;case"UPDATE_POLYGON_DOTS":var o=t[e.group].rings[e.polygon];o.dots=E(o.dots,e.dots);break;case"UPDATE_POLYGON_ROTATION":var r=t[e.group].rings[e.polygon];r.rotation=E(r.rotation,e.rotation);break;case"UPDATE_POLYGON_SIDES":var a=t[e.group].rings[e.polygon];a.sides=E(a.sides,e.sides);break;case"UPDATE_POLYGON_SCALE":var i=t[e.group].rings[e.polygon];i.scale=E(i.scale,e.scale);break;case"RANDOMIZE_POLYGON_RINGS":t[e.group].rings=_();break;case"RANDOMIZE_POLYGON":var s=t[e.group].rings;s[e.polygon]=N(Object(g.b)(s[e.polygon]));break;case"RANDOMIZE_POLYGON_SIDES":t[e.group].rings[e.polygon].sides=C();break;case"RANDOMIZE_POLYGON_ROTATION":t[e.group].rings[e.polygon].rotation=R();break;case"RANDOMIZE_POLYGON_SCALE":t[e.group].rings[e.polygon].scale=x();break;case"RANDOMIZE_POLYGON_DOTS":var c=t[e.group].rings[e.polygon],l=c.sides.amount;c.dots=P(l)}})),I=[{active:!0,position:{x:0,y:0},rings:[{active:!0,position:{x:0,y:0},dots:{enabled:!0,fillColours:["black"],size:1,strokeColours:["black"],strokeWidth:1},rotation:{clockwise:!0,enabled:!0,speed:1,startingRotation:1},scale:{enabled:!0,speed:1,range:{max:10,min:0},startingSize:5},sides:{enabled:!0,strokeWidth:1,colours:["black"],amount:6}}]}];function W(t){var e=Object(y.a)(t);return e[0].rings=_(),e}var T=function(t){var e=t.children,n=Object(o.useReducer)(A,I,W),a=Object(d.a)(n,2),i=a[0],s=a[1];return r.a.createElement(L.Provider,{value:s},r.a.createElement(M.Provider,{value:i},e))},L=Object(o.createContext)({}),M=Object(o.createContext)([]),z=n(15);function G(){var t=Object(l.a)(["\n  grid-row: 1;\n  grid-column: 1;\n"]);return G=function(){return t},t}var D=Object(u.a)(z.a.div)(G()),Y=function(t){var e=t.children,n=t.currentScreen,o=Object(z.b)(n,(function(t){return t}),{from:{opacity:0,transform:"translate(100%,0)"},enter:{opacity:1,transform:"translate(0%,0)"},leave:{opacity:0,transform:"translate(-50%,0)"}});return r.a.createElement(r.a.Fragment,null,o.map((function(t){var n=t.item,o=t.key,a=t.props;return r.a.createElement(D,{key:o,style:a},r.a.Children.map(e,(function(t,e){if(e===n-1)return t})))})))},U=n(10),Z=n(1),F=n(3),H=function(){function t(e){Object(Z.a)(this,t),this.style=void 0,this.animationState=void 0,this.animationConstants=void 0,this.style=this.getInitialStyles(e),this.animationConstants=this.getInitialConstants(e),this.animationState=this.getInitialState(e)}return Object(F.a)(t,[{key:"getInitialStyles",value:function(t){var e=t.sides,n=t.dots;return{sides:{colours:e.colours,strokeWidth:e.strokeWidth,enabled:e.enabled},dots:{enabled:n.enabled,size:n.size,fillColours:n.fillColours,strokeColours:n.strokeColours,strokeWidth:n.strokeWidth}}}},{key:"getInitialPoints",value:function(t,e){var n=2*Math.PI/t,o=n;return Object(y.a)(Array(t)).map((function(){o+=n;var t=Math.cos(o),r=Math.sin(o);return{x:Math.round(t*e),y:Math.round(r*e),sin:r,cos:t}}))}},{key:"getInitialConstants",value:function(t){var e=t.active,n=t.rotation,o=t.scale;return{position:t.position,isActive:e,isRotating:n.enabled,isScaling:o.enabled,isRotatingClockwise:n.clockwise,rotationSpeed:n.speed,scalingSpeed:o.speed,scalingRange:o.range}}},{key:"getInitialState",value:function(t){var e=t.scale,n=t.rotation,o=t.sides,r=this.getInitialPoints(o.amount,e.startingSize),a=e.startingSize<=(e.range.max-e.range.min)/2;return{currentRotation:n.startingRotation,currentSize:e.startingSize,currentlyExpanding:a,polygonPoints:r}}},{key:"updateRotation",value:function(){var t,e=this.animationConstants,n=e.isRotating,o=e.isRotatingClockwise,r=e.rotationSpeed,a=this.animationState.currentRotation;if(n){if((t=o?a+r:a-r)>=360)t=0+(a-360);else if(t<=-360){t=0-(a-360)}this.animationState.currentRotation=t}}},{key:"updateScale",value:function(){var t=this.animationConstants,e=t.isScaling,n=t.scalingSpeed,o=t.scalingRange,r=this.animationState,a=r.currentlyExpanding,i=r.polygonPoints,s=r.currentSize;if(e){var c,l=a;(c=a?s+n:s-n)>=o.max?(c=o.max,l=!1):c<=o.min&&(c=o.min,l=!0);var u=i.map((function(t){var e=t.cos,n=t.sin,o=Object(m.a)({},t);return o.x=Math.round(e*c),o.y=Math.round(n*c),o}));this.animationState.currentSize=c,this.animationState.currentlyExpanding=l,this.animationState.polygonPoints=u}}},{key:"getPolygonFrame",value:function(){var t=this.style,e=t.dots,n=t.sides,o=this.animationState,r=o.currentRotation,a=o.polygonPoints,i=this.animationConstants.position,s=a.map((function(t){return{x:t.x,y:t.y}})),c=a.map((function(t,e){var n,o=e+1;return n=o===a.length?{x:a[0].x,y:a[0].y}:{x:a[o].x,y:a[o].y},[{x:t.x,y:t.y},n]}));return{position:i,currentRotation:r,dots:{enabled:e.enabled,size:e.size,position:s,fillColours:e.fillColours,strokeColours:e.strokeColours,strokeWidth:e.strokeWidth},sides:{enabled:n.enabled,positions:c,strokeWidth:n.strokeWidth,strokeColours:n.colours}}}},{key:"getPolygonFrameAndStep",value:function(){var t=this.animationConstants.isActive,e=this.getPolygonFrame();return t&&(this.updateScale(),this.updateRotation()),e}}]),t}();function V(t,e){return{x:Math.floor(t.width*(e.x/100)/2),y:Math.floor(t.height*(e.y/100)/2)}}function B(t,e,n){var o=t.currentRotation,r=t.dots,a=t.sides,i=V(e,t.position),s=i.x,c=i.y;n.push(),n.translate(s,c),n.rotate(o),a.enabled&&a.positions.forEach((function(t,e){var o=e%a.strokeColours.length;n.stroke(a.strokeColours[o]),n.strokeWeight(a.strokeWidth),n.line(t[0].x,t[0].y,t[1].x,t[1].y)})),r.enabled&&(n.push(),r.position.forEach((function(t,e){var o=e%r.fillColours.length,a=e%r.strokeColours.length,i=t.x,s=t.y;n.fill(r.fillColours[o]),n.strokeWeight(r.strokeWidth),n.stroke(r.strokeColours[a]),n.ellipse(i,s,r.size)})),n.pop()),n.pop()}function J(t,e){var n=t.map((function(t){return t.rings.map((function(t){return new H(t)}))}));return function(o){o.setup=function(){o.createCanvas(e.width,e.height),o.background("lightgrey")},o.draw=function(){o.angleMode("degrees"),o.background("rgba(255,255,255, 0.05)"),o.translate(e.width/2,e.height/2),n.forEach((function(n,r){o.push();var a=V(e,t[r].position),i=a.x,s=a.y;o.translate(i,s);var c,l=Object(U.a)(n);try{for(l.s();!(c=l.n()).done;){B(c.value.getPolygonFrameAndStep(),e,o)}}catch(u){l.e(u)}finally{l.f()}o.pop()}))}}}var X=n(22),$=n.n(X);function q(){var t=Object(l.a)(["\n  width: 100%;\n  height: 100%;\n"]);return q=function(){return t},t}var K=u.a.div(q()),Q=function(t){var e=t.sketch,n=Object(o.useRef)(null),a=Object(o.useRef)();return Object(o.useEffect)((function(){var t=n.current;void 0!==a.current&&a.current.remove();var o=new $.a(e,t);return a.current=o,function(){a.current.remove()}}),[a,n,e]),r.a.createElement(K,{ref:n})};function tt(){var t=Object(l.a)(["\n  background: white;\n  width: 100%;\n  height: 100%;\n  max-width: 100vw;\n  text-align: center;\n  font-size: 200;\n"]);return tt=function(){return t},t}var et=u.a.div(tt());function nt(t,e){var n=t.length,o=t.map((function(t){return t.rings.length})).join("-"),r=t.map((function(t){return t.rings.map((function(t){return t.rotation.startingRotation})).join("-")})).join("-");return"".concat(n,"-").concat(o,"-").concat(r,"-").concat(e.width,"-").concat(e.height)}var ot=function(){var t=Object(o.useContext)(M),e=Object(o.useState)({height:0,width:0}),n=Object(d.a)(e,2),a=n[0],i=n[1],s=Object(o.useRef)(null);return Object(o.useEffect)((function(){(null===s||void 0===s?void 0:s.current)&&i({height:s.current.offsetHeight,width:s.current.offsetWidth})}),[s,i]),Object(o.useEffect)((function(){function t(){(null===s||void 0===s?void 0:s.current)&&i({height:s.current.offsetHeight,width:s.current.offsetWidth})}var e;t();var n=function(){clearTimeout(e),e=setTimeout((function(){return t()}),250)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[s,i]),r.a.createElement(et,{ref:s},r.a.createElement(Q,{sketch:J(t,a),key:nt(t,a)}))};function rt(){var t=Object(l.a)(["\n  display: grid;\n  grid-template-rows: minmax(90%, 90vh) minmax(10vh, 10px);\n  overflow: hidden;\n"]);return rt=function(){return t},t}var at=u.a.main(rt()),it=function(){var t=Object(o.useContext)(b),e=Object(o.useContext)(v),n=Object(o.useContext)(L);return r.a.createElement(at,null,r.a.createElement(Y,{currentScreen:t.currentScreen},r.a.createElement(ot,null),r.a.createElement("h1",{style:{background:"purple",width:"100%",height:"100%",textAlign:"center",fontSize:200}},"Hello"),r.a.createElement("h1",{style:{background:"pink",width:"100%",height:"100%",textAlign:"center",fontSize:200}},"World")),r.a.createElement("div",null,r.a.createElement("h1",null,"Hello"),r.a.createElement("button",{onClick:function(){e({type:"PREV_SCREEN"})}},"Previous"),r.a.createElement("button",{onClick:function(){e({type:"NEXT_SCREEN"})}},"Next"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){n({type:"RANDOMIZE_POLYGON_RINGS",group:0})}},"Randomize!")))};n(31);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null,r.a.createElement(p,null,r.a.createElement(it,null)))),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/playing-with-polygons",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/playing-with-polygons","/service-worker.js");s?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):c(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):c(e,t)}))}}()}},[[23,1,2]]]);
//# sourceMappingURL=main.756356d1.chunk.js.map