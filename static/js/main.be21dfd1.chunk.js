(this["webpackJsonpplaying-with-polygons"]=this["webpackJsonpplaying-with-polygons"]||[]).push([[0],{23:function(t,e,n){t.exports=n(32)},31:function(t,e,n){},32:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),a=n(18),i=n.n(a),c=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}var l=n(1),u=n(2),d=n(7),g=n(6),p=Object(g.a)((function(t,e){switch(e.type){case"NEXT_SCREEN":var n=t.currentScreen+1;n<=t.totalScreens?t.currentScreen=n:t.currentScreen=1;break;case"PREV_SCREEN":var r=t.currentScreen-1;t.currentScreen=r<=0?t.totalScreens:r}})),f={currentScreen:1,totalScreens:3},h=function(t){var e=t.children,n=Object(r.useReducer)(p,f),a=Object(d.a)(n,2),i=a[0],c=a[1];return o.a.createElement(v.Provider,{value:c},o.a.createElement(b.Provider,{value:i},e))},v=Object(r.createContext)({}),b=Object(r.createContext)({}),m=n(4),O=n(12);function y(t,e){var n=Object(O.a)({},Object(g.b)(t));return Object.keys(e).forEach((function(t){n[t]=e[t]})),n}function E(t,e){return Math.random()*(e-t)+t}function k(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function S(){var t=function(t,e,n){var r,o,a;if(0===e)r=o=a=n;else{var i=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},c=n<.5?n*(1+e):n+e-n*e,s=2*n-c;r=i(s,c,t+1/3),o=i(s,c,t),a=i(s,c,t-1/3)}return[Math.round(255*r),Math.round(255*o),Math.round(255*a)]}(E(0,1),E(.5,.7),E(.5,.7)),e=Object(d.a)(t,3),n=e[0],r=e[1],o=e[2];return"rgb(".concat(n,",").concat(r,",").concat(o,")")}function x(t){var e=k(1,t);return Object(m.a)(Array(e)).map((function(){return S()}))}function w(){var t=k(3,12);return{enabled:!0,strokeWidth:k(1,10),amount:t,colours:x(t)}}function C(t){return{enabled:!0,fillColours:x(t),size:k(5,10),strokeWidth:k(0,10),strokeColours:x(t)}}function P(){return{enabled:!0,clockwise:1===k(0,1),speed:k(1,5),startingRotation:k(1,360)}}function R(){var t=k(0,20),e=k(200,500);return{enabled:!0,range:{min:t,max:e},speed:k(1,5),startingSize:k(t,e)}}function j(){var t=k(0,100);return t<=48?{sidesEnabled:!0,dotsEnabled:!1,rotationEnabled:!0,scaleEnabled:!0}:t<=50?{sidesEnabled:!0,dotsEnabled:!1,rotationEnabled:!0,scaleEnabled:!1}:t<=90?{sidesEnabled:!1,dotsEnabled:!0,rotationEnabled:!0,scaleEnabled:!0}:t<=95?{sidesEnabled:!1,dotsEnabled:!0,rotationEnabled:!0,scaleEnabled:!1}:{sidesEnabled:!0,dotsEnabled:!0,rotationEnabled:!0,scaleEnabled:!0}}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.active,n=void 0===e||e,r=t.position,o=void 0===r?{x:0,y:0}:r,a=w(),i=C(a.amount),c=P(),s=R(),l=j(),u=l.sidesEnabled,d=l.scaleEnabled,g=l.rotationEnabled,p=l.dotsEnabled;return a.enabled=u,i.enabled=p,s.enabled=d,c.enabled=g,{active:n,position:o,sides:a,dots:i,rotation:c,scale:s}}function N(){var t=k(2,8);return Object(m.a)(Array(t)).map((function(){return _()}))}var A=Object(g.a)((function(t,e){switch(e.type){case"CREATE_POLYGON_GROUP":t.push({active:!0,position:{x:0,y:0},rings:N()});break;case"CREATE_POLYGON":t[e.group].rings.push(_());break;case"UPDATE_POLYGON_GROUP_POSITION":t[e.group].position=e.position;break;case"UPDATE_POLYGON_GROUP_ACTIVE":t[e.group].active=e.active;break;case"UPDATE_POLYGON_ALL":var n=t[e.group].rings[e.polygon];void 0!==e.polygonState.active&&(n.active=e.polygonState.active),void 0!==e.polygonState.position&&(n.position=e.polygonState.position),void 0!==e.polygonState.dots&&(n.dots=y(n.dots,e.polygonState.dots)),void 0!==e.polygonState.rotation&&(n.rotation=y(n.rotation,e.polygonState.rotation)),void 0!==e.polygonState.sides&&(n.sides=y(n.sides,e.polygonState.sides)),void 0!==e.polygonState.scale&&(n.scale=y(n.scale,e.polygonState.scale));break;case"UPDATE_POLYGON_POSITION":t[e.group].rings[e.polygon].position=e.position;break;case"UPDATE_POLYGON_ACTIVE":t[e.group].rings[e.polygon].active=e.active;break;case"UPDATE_POLYGON_DOTS":var r=t[e.group].rings[e.polygon];r.dots=y(r.dots,e.dots);break;case"UPDATE_POLYGON_ROTATION":var o=t[e.group].rings[e.polygon];o.rotation=y(o.rotation,e.rotation);break;case"UPDATE_POLYGON_SIDES":var a=t[e.group].rings[e.polygon];a.sides=y(a.sides,e.sides);break;case"UPDATE_POLYGON_SCALE":var i=t[e.group].rings[e.polygon];i.scale=y(i.scale,e.scale);break;case"RANDOMIZE_POLYGON_RINGS":t[e.group].rings=N();break;case"RANDOMIZE_POLYGON":var c=t[e.group].rings;c[e.polygon]=_(Object(g.b)(c[e.polygon]));break;case"RANDOMIZE_POLYGON_SIDES":t[e.group].rings[e.polygon].sides=w();break;case"RANDOMIZE_POLYGON_ROTATION":t[e.group].rings[e.polygon].rotation=P();break;case"RANDOMIZE_POLYGON_SCALE":t[e.group].rings[e.polygon].scale=R();break;case"RANDOMIZE_POLYGON_DOTS":var s=t[e.group].rings[e.polygon],l=s.sides.amount;s.dots=C(l);break;case"DELETE_POLYGON_GROUP":var u=Object(g.b)(t),d=u?u.length:1;u&&d>1&&t.splice(e.group,1);break;case"DELETE_POLYGON_GROUP_RING":var p=Object(g.b)(t);(p?p[e.group].rings.length:1)>1&&t[e.group].rings.splice(e.polygon,1)}})),G=[{active:!0,position:{x:0,y:0},rings:[{active:!0,position:{x:0,y:0},dots:{enabled:!0,fillColours:["black"],size:1,strokeColours:["black"],strokeWidth:1},rotation:{clockwise:!0,enabled:!0,speed:1,startingRotation:1},scale:{enabled:!0,speed:1,range:{max:10,min:0},startingSize:5},sides:{enabled:!0,strokeWidth:1,colours:["black"],amount:6}}]}];function L(t){var e=Object(m.a)(t);return e[0].rings=N(),e}var I=function(t){var e=t.children,n=Object(r.useReducer)(A,G,L),a=Object(d.a)(n,2),i=a[0],c=a[1];return o.a.createElement(T.Provider,{value:c},o.a.createElement(M.Provider,{value:i},e))},T=Object(r.createContext)({}),M=Object(r.createContext)([]),D=n(15);function W(){var t=Object(l.a)(["\n  grid-row: 1;\n  grid-column: 1;\n"]);return W=function(){return t},t}var Y=Object(u.a)(D.a.div)(W()),z=function(t){var e=t.children,n=t.currentScreen,r=Object(D.b)(n,(function(t){return t}),{from:{opacity:0,transform:"translate(100%,0)"},enter:{opacity:1,transform:"translate(0%,0)"},leave:{opacity:0,transform:"translate(-50%,0)"}});return o.a.createElement(o.a.Fragment,null,r.map((function(t){var n=t.item,r=t.key,a=t.props;return o.a.createElement(Y,{key:r,style:a},o.a.Children.map(e,(function(t,e){if(e===n-1)return t})))})))},U=n(10),F=n(3),Z=n(5),V=function(){function t(e){Object(F.a)(this,t),this.style=void 0,this.animationState=void 0,this.animationConstants=void 0,this.style=this.getInitialStyles(e),this.animationConstants=this.getInitialConstants(e),this.animationState=this.getInitialState(e)}return Object(Z.a)(t,[{key:"getInitialStyles",value:function(t){var e=t.sides,n=t.dots;return{sides:{colours:e.colours,strokeWidth:e.strokeWidth,enabled:e.enabled},dots:{enabled:n.enabled,size:n.size,fillColours:n.fillColours,strokeColours:n.strokeColours,strokeWidth:n.strokeWidth}}}},{key:"getInitialPoints",value:function(t,e){var n=2*Math.PI/t,r=n;return Object(m.a)(Array(t)).map((function(){r+=n;var t=Math.cos(r),o=Math.sin(r);return{x:Math.round(t*e),y:Math.round(o*e),sin:o,cos:t}}))}},{key:"getInitialConstants",value:function(t){var e=t.active,n=t.rotation,r=t.scale;return{position:t.position,isActive:e,isRotating:n.enabled,isScaling:r.enabled,isRotatingClockwise:n.clockwise,rotationSpeed:n.speed,scalingSpeed:r.speed,scalingRange:r.range}}},{key:"getInitialState",value:function(t){var e=t.scale,n=t.rotation,r=t.sides,o=this.getInitialPoints(r.amount,e.startingSize),a=e.startingSize<=(e.range.max-e.range.min)/2;return{currentRotation:n.startingRotation,currentSize:e.startingSize,currentlyExpanding:a,polygonPoints:o}}},{key:"updateRotation",value:function(){var t,e=this.animationConstants,n=e.isRotating,r=e.isRotatingClockwise,o=e.rotationSpeed,a=this.animationState.currentRotation;if(n){if((t=r?a+o:a-o)>=360)t=0+(a-360);else if(t<=-360){t=0-(a-360)}this.animationState.currentRotation=t}}},{key:"updateScale",value:function(){var t=this.animationConstants,e=t.isScaling,n=t.scalingSpeed,r=t.scalingRange,o=this.animationState,a=o.currentlyExpanding,i=o.polygonPoints,c=o.currentSize;if(e){var s,l=a;(s=a?c+n:c-n)>=r.max?(s=r.max,l=!1):s<=r.min&&(s=r.min,l=!0);var u=i.map((function(t){var e=t.cos,n=t.sin,r=Object(O.a)({},t);return r.x=Math.round(e*s),r.y=Math.round(n*s),r}));this.animationState.currentSize=s,this.animationState.currentlyExpanding=l,this.animationState.polygonPoints=u}}},{key:"getPolygonFrame",value:function(){var t=this.style,e=t.dots,n=t.sides,r=this.animationState,o=r.currentRotation,a=r.polygonPoints,i=this.animationConstants.position,c=a.map((function(t){return{x:t.x,y:t.y}})),s=a.map((function(t,e){var n,r=e+1;return n=r===a.length?{x:a[0].x,y:a[0].y}:{x:a[r].x,y:a[r].y},[{x:t.x,y:t.y},n]}));return{position:i,currentRotation:o,dots:{enabled:e.enabled,size:e.size,position:c,fillColours:e.fillColours,strokeColours:e.strokeColours,strokeWidth:e.strokeWidth},sides:{enabled:n.enabled,positions:s,strokeWidth:n.strokeWidth,strokeColours:n.colours}}}},{key:"getPolygonFrameAndStep",value:function(){var t=this.animationConstants.isActive,e=this.getPolygonFrame();return t&&(this.updateScale(),this.updateRotation()),e}}]),t}();function H(t,e){return{x:Math.floor(t.width*(e.x/100)/2),y:Math.floor(t.height*(e.y/100)/2)}}function B(t,e,n){var r=t.currentRotation,o=t.dots,a=t.sides,i=H(e,t.position),c=i.x,s=i.y;n.push(),n.translate(c,s),n.rotate(r),a.enabled&&a.positions.forEach((function(t,e){var r=e%a.strokeColours.length;n.stroke(a.strokeColours[r]),n.strokeWeight(a.strokeWidth),n.line(t[0].x,t[0].y,t[1].x,t[1].y)})),o.enabled&&(n.push(),o.position.forEach((function(t,e){var r=e%o.fillColours.length,a=e%o.strokeColours.length,i=t.x,c=t.y;n.fill(o.fillColours[r]),n.strokeWeight(o.strokeWidth),n.stroke(o.strokeColours[a]),n.ellipse(i,c,o.size)})),n.pop()),n.pop()}function J(t,e,n){var r=new V(t);return function(t){t.setup=function(){t.createCanvas(e.width,e.height),t.background("#f6f6f6")},t.draw=function(){r.getPolygonFrameAndStep(),t.angleMode("degrees"),t.background("rgba(255,255,255, 0.05)"),t.translate(e.width/2,e.height/2),n&&t.scale(n),B(r.getPolygonFrameAndStep(),e,t)}}}function X(t,e,n){var r=t.rings.map((function(t){return new V(t)}));return function(t){t.setup=function(){t.createCanvas(e.width,e.height),t.background("#f6f6f6")},t.draw=function(){t.angleMode("degrees"),t.background("rgba(255,255,255, 0.05)"),t.translate(e.width/2,e.height/2),n&&t.scale(n),t.push();var o,a=Object(U.a)(r);try{for(a.s();!(o=a.n()).done;){B(o.value.getPolygonFrameAndStep(),e,t)}}catch(i){a.e(i)}finally{a.f()}t.pop()}}}function $(t,e){var n=t.map((function(t){return t.rings.map((function(t){return new V(t)}))}));return function(r){r.setup=function(){r.createCanvas(e.width,e.height),r.background("#f6f6f6")},r.draw=function(){r.angleMode("degrees"),r.background("rgba(255,255,255, 0.05)"),r.translate(e.width/2,e.height/2),n.forEach((function(n,o){r.push();var a=H(e,t[o].position),i=a.x,c=a.y;r.translate(i,c);var s,l=Object(U.a)(n);try{for(l.s();!(s=l.n()).done;){B(s.value.getPolygonFrameAndStep(),e,r)}}catch(u){l.e(u)}finally{l.f()}r.pop()}))}}}var q=n(22),K=n.n(q),Q=function(t){var e=t.sketch,n=Object(r.useRef)(null),a=Object(r.useRef)();return Object(r.useEffect)((function(){var t=n.current;void 0!==a.current&&a.current.remove();var r=new K.a(e,t);return a.current=r,function(){a.current.remove()}}),[a,n,e]),o.a.createElement("div",{ref:n})};function tt(){var t=Object(l.a)(["\n  background: white;\n  width: 100%;\n  height: 100%;\n  max-width: 100vw;\n  text-align: center;\n  font-size: 200;\n"]);return tt=function(){return t},t}var et=u.a.div(tt());function nt(t,e){var n=t.length,r=t.map((function(t){return t.rings.length})).join("-"),o=t.map((function(t){return t.rings.map((function(t){return t.rotation.startingRotation})).join("-")})).join("-");return"".concat(n,"-").concat(r,"-").concat(o,"-").concat(e.width,"-").concat(e.height)}var rt=function(){var t=Object(r.useContext)(M),e=Object(r.useState)({height:0,width:0}),n=Object(d.a)(e,2),a=n[0],i=n[1],c=Object(r.useRef)(null);return Object(r.useEffect)((function(){(null===c||void 0===c?void 0:c.current)&&i({height:c.current.offsetHeight,width:c.current.offsetWidth})}),[c,i]),Object(r.useEffect)((function(){function t(){(null===c||void 0===c?void 0:c.current)&&i({height:c.current.offsetHeight,width:c.current.offsetWidth})}var e;t();var n=function(){clearTimeout(e),e=setTimeout((function(){return t()}),250)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[c,i]),o.a.createElement(et,{ref:c},o.a.createElement(Q,{sketch:$(t,a),key:nt(t,a)}))};function ot(){var t=Object(l.a)(["\n  height: 50px;\n  justify-self: center;\n  align-self: center;\n  border-radius: 5px;\n  grid-column: 1/3;\n"]);return ot=function(){return t},t}function at(){var t=Object(l.a)(["\n  min-height: 50px;\n  border-radius: 5px;\n  grid-row: 2/3;\n"]);return at=function(){return t},t}function it(){var t=Object(l.a)(["\n  min-height: 50px;\n  border-radius: 5px;\n  grid-row: 2/3;\n"]);return it=function(){return t},t}function ct(){var t=Object(l.a)(["\n  grid-column: 1/3;\n  justify-self: center;\n"]);return ct=function(){return t},t}function st(){var t=Object(l.a)(["\n  display: grid;\n  grid-template-columns: 80px 80px;\n  grid-template-rows: 150px 50px;\n  grid-gap: 10px;\n  margin: 0 5px 10px;\n"]);return st=function(){return t},t}function lt(){var t=Object(l.a)(["\n  display: flex;\n  width: 100%;\n  overflow-x: scroll;\n"]);return lt=function(){return t},t}function ut(){var t=Object(l.a)(["\n  justify-self: center;\n  align-self: center;\n  min-height: 50px;\n  border-radius: 5px;\n  grid-column: 2/3;\n"]);return ut=function(){return t},t}function dt(){var t=Object(l.a)(["\n  justify-self: center;\n  align-self: center;\n  min-height: 50px;\n  border-radius: 5px;\n"]);return dt=function(){return t},t}function gt(){var t=Object(l.a)(["\n  display: grid;\n  grid-template-columns: 200px 100px;\n  grid-template-rows: 100px 100px;\n  justify-self: center;\n"]);return gt=function(){return t},t}function pt(){var t=Object(l.a)(["\n  margin: 0 10px;\n  font-size: 18px;\n  border-radius: 10px;\n  height: 50px;\n  margin-bottom: 10px;\n"]);return pt=function(){return t},t}function ft(){var t=Object(l.a)(["\n  background: lightgrey;\n  display: grid;\n  grid-gap: 10px;\n  grid-template-rows: 200px 1fr;\n"]);return ft=function(){return t},t}function ht(){var t=Object(l.a)(["\n  display: grid;\n  grid-gap: 10px;\n  background: grey;\n  list-style: none;\n  overflow-y: scroll;\n  height: 100%;\n"]);return ht=function(){return t},t}var vt=u.a.ul(ht()),bt=u.a.li(ft()),mt=u.a.button(pt()),Ot=u.a.div(gt()),yt=u.a.button(dt()),Et=u.a.button(ut());function kt(){var t=Object(r.useContext)(M),e=Object(r.useContext)(T),n=t.length;return o.a.createElement(vt,null,t.map((function(r,a){var i="".concat(r.rings.length,"-").concat(r.rings[0].rotation.startingRotation,"-").concat(a),c=a===t.length-1;return o.a.createElement(bt,{key:i,"aria-label":"Group ".concat(a," Canvas")},o.a.createElement(Ot,null,o.a.createElement(Q,{sketch:X(r,{height:200,width:200},.2)}),o.a.createElement(yt,{onClick:function(){e({type:"RANDOMIZE_POLYGON_RINGS",group:a})}},"Randomize"),o.a.createElement(Et,{disabled:1===n,onClick:function(){e({type:"DELETE_POLYGON_GROUP",group:a})}},"Delete")),o.a.createElement(jt,{polygonRings:r.rings,groupNumber:a}),c&&o.a.createElement(mt,{onClick:function(){e({type:"CREATE_POLYGON_GROUP"})}},"Add Group"))})))}var St=u.a.ul(lt()),xt=u.a.li(st()),wt=u.a.div(ct()),Ct=u.a.button(it()),Pt=u.a.button(at()),Rt=u.a.button(ot()),jt=function(t){var e=t.polygonRings,n=t.groupNumber,a=Object(r.useContext)(T),i=e.length;return o.a.createElement(St,null,e.map((function(t,r){var c=i===r+1,s="".concat(e.length,"-").concat(t.rotation.startingRotation,"-").concat(r);return o.a.createElement(o.a.Fragment,{key:s},o.a.createElement(xt,{"aria-label":"Group ".concat(n,", Ring ").concat(r," Canvas")},o.a.createElement(wt,null,o.a.createElement(Q,{sketch:J(t,{height:150,width:150},.15)})),o.a.createElement(Ct,{onClick:function(){a({type:"RANDOMIZE_POLYGON",group:n,polygon:r})}},"Randomize"),o.a.createElement(Pt,{disabled:1===i,onClick:function(){a({type:"DELETE_POLYGON_GROUP_RING",group:n,polygon:r})}},"Delete")),c&&o.a.createElement(xt,null,o.a.createElement(Rt,{onClick:function(){a({type:"CREATE_POLYGON",group:n})}},"Add Polygon")))})))};function _t(){var t=Object(l.a)(["\n  display: grid;\n  grid-template-rows: minmax(90%, 90vh) minmax(10vh, 10px);\n  overflow: hidden;\n"]);return _t=function(){return t},t}var Nt=u.a.main(_t()),At=function(){var t=Object(r.useContext)(b),e=Object(r.useContext)(v),n=Object(r.useContext)(T);return o.a.createElement(Nt,null,o.a.createElement(z,{currentScreen:t.currentScreen},o.a.createElement(rt,null),o.a.createElement(kt,null),o.a.createElement("h1",{style:{background:"pink",width:"100%",height:"100%",textAlign:"center",fontSize:200}},"World")),o.a.createElement("div",null,o.a.createElement("h1",null,"Hello"),o.a.createElement("button",{onClick:function(){e({type:"PREV_SCREEN"})}},"Previous"),o.a.createElement("button",{onClick:function(){e({type:"NEXT_SCREEN"})}},"Next"),o.a.createElement("br",null),o.a.createElement("button",{onClick:function(){n({type:"RANDOMIZE_POLYGON_RINGS",group:0})}},"Randomize!"),o.a.createElement("button",{onClick:function(){n({type:"CREATE_POLYGON_GROUP"})}},"App Group!")))};n(31);i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(I,null,o.a.createElement(h,null,o.a.createElement(At,null)))),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/playing-with-polygons",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/playing-with-polygons","/service-worker.js");c?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):s(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):s(e,t)}))}}()}},[[23,1,2]]]);
//# sourceMappingURL=main.be21dfd1.chunk.js.map